<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>eCommerce Pulse — Biweekly Trends Report</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Mono:ital,wght@0,300;0,400;1,300&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a0a0f;
    --surface: #111118;
    --surface2: #1a1a24;
    --border: rgba(255,255,255,0.07);
    --accent: #e8ff5a;
    --accent2: #5affcf;
    --accent3: #ff5a8a;
    --shopify: #96bf48;
    --woo: #7f54b3;
    --magento: #f46f25;
    --text: #e8e8f0;
    --muted: #7070a0;
    --confirmed: #5affcf;
    --reported: #e8ff5a;
    --inferred: #ff9f5a;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    font-weight: 300;
    min-height: 100vh;
    overflow-x: hidden;
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image:
      repeating-linear-gradient(0deg, transparent, transparent 40px, rgba(255,255,255,0.012) 40px, rgba(255,255,255,0.012) 41px),
      repeating-linear-gradient(90deg, transparent, transparent 40px, rgba(255,255,255,0.012) 40px, rgba(255,255,255,0.012) 41px);
    pointer-events: none;
    z-index: 0;
  }

  .container { max-width: 1100px; margin: 0 auto; padding: 0 24px; position: relative; z-index: 1; }

  /* HEADER */
  header { border-bottom: 1px solid var(--border); padding: 32px 0 28px; }
  .header-inner { display: flex; justify-content: space-between; align-items: flex-end; gap: 24px; flex-wrap: wrap; }
  .eyebrow { font-family: 'DM Mono', monospace; font-size: 10px; letter-spacing: 0.18em; text-transform: uppercase; color: var(--muted); margin-bottom: 6px; }
  h1 { font-family: 'Syne', sans-serif; font-size: clamp(28px, 5vw, 42px); font-weight: 800; line-height: 1; letter-spacing: -0.02em; }
  h1 span { color: var(--accent); }
  .header-right { display: flex; flex-direction: column; align-items: flex-end; gap: 10px; }
  .issue-badge { display: inline-block; background: var(--accent); color: #0a0a0f; font-family: 'DM Mono', monospace; font-size: 10px; letter-spacing: 0.1em; text-transform: uppercase; padding: 4px 10px; }
  .date-str { font-family: 'DM Mono', monospace; font-size: 12px; color: var(--muted); }

  /* REFRESH BUTTON */
  .refresh-btn {
    display: flex; align-items: center; gap: 8px;
    background: transparent; border: 1px solid var(--accent);
    color: var(--accent); font-family: 'DM Mono', monospace;
    font-size: 11px; letter-spacing: 0.1em; text-transform: uppercase;
    padding: 8px 16px; cursor: pointer;
    transition: background 0.2s, color 0.2s;
  }
  .refresh-btn:hover { background: var(--accent); color: #0a0a0f; }
  .refresh-btn:disabled { opacity: 0.4; cursor: not-allowed; }
  .refresh-btn svg { width: 14px; height: 14px; transition: transform 0.6s; }
  .refresh-btn.loading svg { animation: spin 1s linear infinite; }
  @keyframes spin { to { transform: rotate(360deg); } }

  .refresh-status {
    font-family: 'DM Mono', monospace; font-size: 10px; color: var(--muted);
    text-align: right; min-height: 16px;
  }

  /* TIMESTAMP BAR */
  .timestamp-bar {
    display: flex; justify-content: space-between; align-items: center;
    padding: 10px 0; margin-bottom: 8px;
    border-bottom: 1px solid var(--border);
  }
  .last-refreshed { font-family: 'DM Mono', monospace; font-size: 10px; color: var(--muted); }
  .confidence-legend { display: flex; gap: 16px; }
  .legend-item { display: flex; align-items: center; gap: 5px; font-family: 'DM Mono', monospace; font-size: 9px; color: var(--muted); }
  .legend-dot { width: 7px; height: 7px; border-radius: 50%; }
  .legend-dot.confirmed { background: var(--confirmed); }
  .legend-dot.reported { background: var(--reported); }
  .legend-dot.inferred { background: var(--inferred); }

  /* SUMMARY BAR */
  .summary-bar { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1px; background: var(--border); margin: 24px 0; border: 1px solid var(--border); }
  .summary-cell { background: var(--surface); padding: 20px 24px; transition: background 0.2s; }
  .summary-cell:hover { background: var(--surface2); }
  .summary-label { font-family: 'DM Mono', monospace; font-size: 10px; letter-spacing: 0.12em; text-transform: uppercase; color: var(--muted); margin-bottom: 8px; }
  .summary-value { font-family: 'Syne', sans-serif; font-size: 22px; font-weight: 700; line-height: 1; }
  .summary-value.green { color: var(--accent); }
  .summary-value.teal { color: var(--accent2); }
  .summary-value.pink { color: var(--accent3); }

  /* SECTION HEADERS */
  .section-header { display: flex; align-items: center; gap: 14px; margin-bottom: 20px; padding-bottom: 14px; border-bottom: 1px solid var(--border); }
  .section-title { font-family: 'Syne', sans-serif; font-size: 13px; font-weight: 700; letter-spacing: 0.12em; text-transform: uppercase; }
  .section-line { flex: 1; height: 1px; background: var(--border); }
  .section-num { font-family: 'DM Mono', monospace; font-size: 10px; color: var(--muted); }
  section { margin-bottom: 48px; }

  /* EXEC SUMMARY */
  .exec-summary {
    background: var(--surface);
    border: 1px solid var(--border);
    border-left: 3px solid var(--accent);
    padding: 24px 28px;
  }
  .exec-summary p { font-size: 14px; line-height: 1.75; color: rgba(232,232,240,0.9); margin-bottom: 12px; }
  .exec-summary p:last-child { margin-bottom: 0; }
  .exec-summary strong { color: var(--text); font-weight: 500; }

  /* CONFIDENCE BADGE */
  .conf {
    display: inline-block; font-family: 'DM Mono', monospace; font-size: 9px;
    padding: 2px 6px; letter-spacing: 0.08em; text-transform: uppercase;
    border-radius: 2px; margin-left: 6px; vertical-align: middle;
  }
  .conf.confirmed { background: rgba(90,255,207,0.12); color: var(--confirmed); }
  .conf.reported { background: rgba(232,255,90,0.1); color: var(--reported); }
  .conf.inferred { background: rgba(255,159,90,0.1); color: var(--inferred); }

  /* SOURCE CHIP */
  .source-chip {
    display: inline-block; font-family: 'DM Mono', monospace; font-size: 9px;
    color: var(--muted); border: 1px solid rgba(255,255,255,0.08);
    padding: 2px 7px; margin-top: 2px; text-decoration: none;
    transition: color 0.2s, border-color 0.2s;
  }
  .source-chip:hover { color: var(--accent2); border-color: var(--accent2); }

  /* TRENDS */
  .trends-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; }
  .trend-card { background: var(--surface); border: 1px solid var(--border); padding: 24px; transition: border-color 0.2s; }
  .trend-card:hover { border-color: rgba(232,255,90,0.25); }
  .trend-tag { display: inline-block; font-family: 'DM Mono', monospace; font-size: 9px; letter-spacing: 0.12em; text-transform: uppercase; padding: 3px 8px; background: rgba(232,255,90,0.08); color: var(--accent); margin-bottom: 12px; }
  .trend-title { font-family: 'Syne', sans-serif; font-size: 15px; font-weight: 700; margin-bottom: 10px; line-height: 1.3; }
  .trend-body { font-size: 13px; line-height: 1.65; color: rgba(232,232,240,0.75); }
  .trend-stat { margin-top: 14px; padding-top: 14px; border-top: 1px solid var(--border); font-family: 'DM Mono', monospace; font-size: 11px; color: var(--accent2); }
  .trend-footer { margin-top: 12px; display: flex; flex-wrap: wrap; gap: 6px; align-items: center; }

  /* PLATFORM CARDS */
  .platform-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
  .platform-card { background: var(--surface); border: 1px solid var(--border); padding: 24px; position: relative; overflow: hidden; transition: border-color 0.2s, transform 0.2s; }
  .platform-card:hover { transform: translateY(-2px); }
  .platform-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; }
  .platform-card.shopify::before { background: var(--shopify); }
  .platform-card.shopify:hover { border-color: var(--shopify); }
  .platform-card.woo::before { background: var(--woo); }
  .platform-card.woo:hover { border-color: var(--woo); }
  .platform-card.magento::before { background: var(--magento); }
  .platform-card.magento:hover { border-color: var(--magento); }
  .platform-name { font-family: 'Syne', sans-serif; font-size: 16px; font-weight: 700; margin-bottom: 4px; }
  .platform-version { font-family: 'DM Mono', monospace; font-size: 10px; color: var(--muted); margin-bottom: 18px; }
  .platform-highlights { list-style: none; display: flex; flex-direction: column; gap: 14px; }
  .platform-highlights li { font-size: 13px; line-height: 1.5; padding-left: 14px; position: relative; color: rgba(232,232,240,0.85); }
  .platform-highlights li::before { content: '→'; position: absolute; left: 0; font-family: 'DM Mono', monospace; font-size: 10px; top: 2px; color: var(--muted); }
  .platform-highlights li strong { color: var(--text); font-weight: 500; }
  .platform-sources { margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--border); display: flex; flex-wrap: wrap; gap: 6px; }

  /* BEST PRACTICES */
  .bp-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
  .bp-card { background: var(--surface); border: 1px solid var(--border); padding: 20px 22px; }
  .bp-num { font-family: 'Syne', sans-serif; font-size: 36px; font-weight: 800; color: rgba(232,255,90,0.1); line-height: 1; margin-bottom: 8px; }
  .bp-title { font-family: 'Syne', sans-serif; font-size: 13px; font-weight: 700; margin-bottom: 8px; }
  .bp-body { font-size: 12.5px; line-height: 1.6; color: rgba(232,232,240,0.7); margin-bottom: 10px; }

  /* INTEL TABLE */
  .intel-table { width: 100%; border-collapse: collapse; font-size: 13px; }
  .intel-table th { font-family: 'DM Mono', monospace; font-size: 10px; letter-spacing: 0.1em; text-transform: uppercase; color: var(--muted); text-align: left; padding: 10px 16px; background: var(--surface); border: 1px solid var(--border); font-weight: 400; }
  .intel-table td { padding: 14px 16px; border: 1px solid var(--border); vertical-align: top; line-height: 1.5; color: rgba(232,232,240,0.8); background: var(--bg); }
  .intel-table tr:hover td { background: var(--surface); }
  .intel-table td:first-child { font-family: 'Syne', sans-serif; font-weight: 600; font-size: 13px; color: var(--text); white-space: nowrap; }
  .badge { display: inline-block; font-family: 'DM Mono', monospace; font-size: 9px; padding: 2px 6px; border-radius: 2px; letter-spacing: 0.08em; text-transform: uppercase; margin-left: 6px; vertical-align: middle; }
  .badge.new { background: rgba(232,255,90,0.15); color: var(--accent); }
  .badge.watch { background: rgba(90,255,207,0.12); color: var(--accent2); }
  .badge.risk { background: rgba(255,90,138,0.12); color: var(--accent3); }

  /* SOURCES SECTION */
  .sources-section { background: var(--surface); border: 1px solid var(--border); padding: 24px; margin-bottom: 48px; }
  .sources-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin-top: 16px; }
  .source-row { font-size: 12px; line-height: 1.5; color: rgba(232,232,240,0.6); display: flex; gap: 10px; }
  .source-row span { font-family: 'DM Mono', monospace; font-size: 10px; color: var(--muted); min-width: 24px; }
  .source-row a { color: var(--accent2); text-decoration: none; }
  .source-row a:hover { text-decoration: underline; }

  /* FOOTER */
  footer { border-top: 1px solid var(--border); padding: 28px 0; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px; }
  .footer-note { font-family: 'DM Mono', monospace; font-size: 10px; color: var(--muted); line-height: 1.6; }
  .next-issue { font-family: 'DM Mono', monospace; font-size: 10px; color: var(--accent); letter-spacing: 0.08em; }

  /* FEEDBACK WIDGET */
  .feedback-fab {
    position: fixed; bottom: 28px; right: 28px; z-index: 200;
    background: var(--accent); color: #0a0a0f;
    border: none; cursor: pointer;
    font-family: 'DM Mono', monospace; font-size: 11px;
    letter-spacing: 0.1em; text-transform: uppercase;
    padding: 12px 20px; display: flex; align-items: center; gap: 8px;
    box-shadow: 0 4px 24px rgba(232,255,90,0.25);
    transition: background 0.2s, transform 0.2s;
  }
  .feedback-fab:hover { background: #f5ff80; transform: translateY(-2px); }
  .feedback-fab svg { width: 14px; height: 14px; }

  .feedback-panel {
    position: fixed; bottom: 84px; right: 28px; z-index: 200;
    width: 360px; background: var(--surface2);
    border: 1px solid rgba(232,255,90,0.25);
    box-shadow: 0 8px 40px rgba(0,0,0,0.6);
    display: none; flex-direction: column;
    animation: slideUp 0.2s ease;
  }
  .feedback-panel.open { display: flex; }
  @keyframes slideUp { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }

  .feedback-panel-header {
    display: flex; justify-content: space-between; align-items: center;
    padding: 16px 20px; border-bottom: 1px solid var(--border);
  }
  .feedback-panel-title { font-family: 'Syne', sans-serif; font-size: 13px; font-weight: 700; }
  .feedback-close { background: none; border: none; color: var(--muted); cursor: pointer; font-size: 18px; line-height: 1; padding: 0; transition: color 0.2s; }
  .feedback-close:hover { color: var(--text); }

  .feedback-tabs { display: flex; border-bottom: 1px solid var(--border); }
  .feedback-tab {
    flex: 1; padding: 10px; font-family: 'DM Mono', monospace; font-size: 10px;
    letter-spacing: 0.1em; text-transform: uppercase; text-align: center;
    background: none; border: none; color: var(--muted); cursor: pointer;
    border-bottom: 2px solid transparent; transition: color 0.2s, border-color 0.2s;
  }
  .feedback-tab.active { color: var(--accent); border-bottom-color: var(--accent); }

  .feedback-body { padding: 16px 20px; }

  .feedback-label { font-family: 'DM Mono', monospace; font-size: 10px; letter-spacing: 0.1em; text-transform: uppercase; color: var(--muted); margin-bottom: 8px; display: block; }

  .feedback-issue-label {
    font-family: 'DM Mono', monospace; font-size: 10px; color: var(--muted);
    margin-bottom: 10px;
  }

  .feedback-textarea {
    width: 100%; background: var(--bg); border: 1px solid var(--border);
    color: var(--text); font-family: 'DM Sans', sans-serif; font-size: 13px;
    font-weight: 300; padding: 12px; resize: vertical; min-height: 100px;
    outline: none; transition: border-color 0.2s;
    line-height: 1.6;
  }
  .feedback-textarea:focus { border-color: rgba(232,255,90,0.4); }
  .feedback-textarea::placeholder { color: var(--muted); }

  .feedback-actions { display: flex; justify-content: flex-end; margin-top: 12px; }
  .feedback-submit {
    background: var(--accent); color: #0a0a0f; border: none; cursor: pointer;
    font-family: 'DM Mono', monospace; font-size: 10px; letter-spacing: 0.1em;
    text-transform: uppercase; padding: 9px 18px; transition: background 0.2s;
  }
  .feedback-submit:hover { background: #f5ff80; }
  .feedback-submit:disabled { opacity: 0.4; cursor: not-allowed; }

  .feedback-success {
    display: none; text-align: center; padding: 20px;
    font-family: 'DM Mono', monospace; font-size: 12px; color: var(--accent2);
  }

  /* FEEDBACK LOG */
  .feedback-log { display: flex; flex-direction: column; gap: 12px; max-height: 280px; overflow-y: auto; padding-right: 4px; }
  .feedback-log::-webkit-scrollbar { width: 4px; }
  .feedback-log::-webkit-scrollbar-track { background: var(--bg); }
  .feedback-log::-webkit-scrollbar-thumb { background: var(--border); }

  .feedback-entry { background: var(--surface); border: 1px solid var(--border); padding: 12px 14px; }
  .feedback-entry-meta { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
  .feedback-entry-issue { font-family: 'DM Mono', monospace; font-size: 9px; color: var(--accent); letter-spacing: 0.08em; text-transform: uppercase; }
  .feedback-entry-date { font-family: 'DM Mono', monospace; font-size: 9px; color: var(--muted); }
  .feedback-entry-text { font-size: 12px; line-height: 1.6; color: rgba(232,232,240,0.8); }
  .feedback-entry-delete { background: none; border: none; color: var(--muted); cursor: pointer; font-size: 11px; font-family: 'DM Mono', monospace; padding: 0; margin-top: 8px; transition: color 0.2s; }
  .feedback-entry-delete:hover { color: var(--accent3); }

  .feedback-empty { font-family: 'DM Mono', monospace; font-size: 11px; color: var(--muted); text-align: center; padding: 24px 0; }

  .feedback-copy-btn {
    width: 100%; margin-top: 12px; background: transparent;
    border: 1px solid var(--border); color: var(--muted);
    font-family: 'DM Mono', monospace; font-size: 10px;
    letter-spacing: 0.1em; text-transform: uppercase;
    padding: 8px; cursor: pointer; transition: border-color 0.2s, color 0.2s;
  }
  .feedback-copy-btn:hover { border-color: var(--accent2); color: var(--accent2); }
  .feedback-unread-dot {
    width: 7px; height: 7px; background: var(--accent3); border-radius: 50%;
    display: none;
  }

  /* LOADING OVERLAY */
  .loading-overlay {
    display: none; position: fixed; inset: 0; background: rgba(10,10,15,0.85);
    z-index: 100; align-items: center; justify-content: center; flex-direction: column; gap: 16px;
  }
  .loading-overlay.active { display: flex; }
  .loading-spinner { width: 40px; height: 40px; border: 2px solid rgba(232,255,90,0.2); border-top-color: var(--accent); border-radius: 50%; animation: spin 0.8s linear infinite; }
  .loading-text { font-family: 'DM Mono', monospace; font-size: 12px; color: var(--accent); letter-spacing: 0.1em; }
  .loading-sub { font-family: 'DM Mono', monospace; font-size: 10px; color: var(--muted); }

  /* ANIMATIONS */
  @keyframes fadeUp { from { opacity: 0; transform: translateY(16px); } to { opacity: 1; transform: translateY(0); } }
  .platform-card, .trend-card, .bp-card { animation: fadeUp 0.5s ease both; }
  .platform-card:nth-child(1) { animation-delay: 0.05s; }
  .platform-card:nth-child(2) { animation-delay: 0.1s; }
  .platform-card:nth-child(3) { animation-delay: 0.15s; }

  @media (max-width: 768px) {
    .platform-grid, .bp-grid, .trends-grid { grid-template-columns: 1fr; }
    .summary-bar { grid-template-columns: repeat(2, 1fr); }
    .header-right { align-items: flex-start; }
    .sources-grid { grid-template-columns: 1fr; }
    .confidence-legend { display: none; }
  }
</style>
</head>
<body>

<!-- LOADING OVERLAY -->
<div class="loading-overlay" id="loadingOverlay">
  <div class="loading-spinner"></div>
  <div class="loading-text">Refreshing Report</div>
  <div class="loading-sub" id="loadingSubtext">Searching for latest platform updates...</div>
</div>

<div class="container">

  <!-- HEADER -->
  <header>
    <div class="header-inner">
      <div>
        <div class="eyebrow">NNA eCommerce Program · Internal Intelligence</div>
        <h1>eCommerce <span>Pulse</span></h1>
      </div>
      <div class="header-right">
        <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;">
          <div class="issue-badge" id="issueBadge">Issue 01 · Vol. 2026</div>
          <span class="date-str" id="dateStr">February 23, 2026 · Biweekly</span>
        </div>
        <button class="refresh-btn" id="refreshBtn" onclick="refreshReport()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="23 4 23 10 17 10"></polyline>
            <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
          </svg>
          Refresh Report
        </button>
        <div class="refresh-status" id="refreshStatus"></div>
      </div>
    </div>
  </header>

  <!-- TIMESTAMP + LEGEND -->
  <div class="timestamp-bar">
    <div class="last-refreshed" id="lastRefreshed">Last refreshed: February 23, 2026 at 9:00 AM</div>
    <div class="confidence-legend">
      <div class="legend-item"><div class="legend-dot confirmed"></div> Confirmed — Official source</div>
      <div class="legend-item"><div class="legend-dot reported"></div> Reported — Trade press</div>
      <div class="legend-item"><div class="legend-dot inferred"></div> Inferred — Pattern analysis</div>
    </div>
  </div>

  <!-- SUMMARY BAR -->
  <div class="summary-bar" id="summaryBar">
    <div class="summary-cell"><div class="summary-label">Platforms Tracked</div><div class="summary-value green">3</div></div>
    <div class="summary-cell"><div class="summary-label">Shopify Updates</div><div class="summary-value green">150+</div></div>
    <div class="summary-cell"><div class="summary-label">WooCommerce Ver.</div><div class="summary-value teal">10.5.2</div></div>
    <div class="summary-cell"><div class="summary-label">Top Trend</div><div class="summary-value pink">Agentic AI</div></div>
  </div>

  <!-- 01: EXECUTIVE SUMMARY -->
  <section id="execSection">
    <div class="section-header">
      <span class="section-title">Executive Summary</span>
      <div class="section-line"></div>
      <span class="section-num">01</span>
    </div>
    <div class="exec-summary" id="execContent">
      <p>The dominant story this cycle is <strong>agentic commerce</strong> — the shift from customers browsing storefronts to AI assistants autonomously discovering, evaluating, and purchasing products on their behalf. Shopify's Winter '26 "RenAIssance" Edition (150+ features) is the clearest signal: products are now purchasable directly inside ChatGPT, Microsoft Copilot, and Perplexity without a customer ever visiting a traditional storefront. <span class="conf confirmed">Confirmed</span></p>
      <p>For the NNA eCommerce program, this raises an urgent question: <strong>is our product data structured well enough to be discovered by AI systems?</strong> Clean metadata, complete attributes, and accurate descriptions are no longer just SEO best practices — they are the primary mechanism by which AI channels surface and recommend products. Dealers whose catalogs are incomplete or inconsistently tagged risk being invisible in the next wave of commerce channels. <span class="conf inferred">Inferred</span></p>
      <p>On the platform side, WooCommerce shipped three rapid releases (10.5, 10.5.1, 10.5.2) in February alone — reflecting both meaningful improvements in analytics performance and the team's quick response to compatibility regressions. Adobe Commerce is restructuring its entire patch cadence to monthly security releases starting 2026, with a major annual feature update in May. Dealers and their tech partners should plan maintenance schedules accordingly. <span class="conf confirmed">Confirmed</span></p>
    </div>
  </section>

  <!-- 02: INDUSTRY TRENDS -->
  <section id="trendsSection">
    <div class="section-header">
      <span class="section-title">Industry Trends</span>
      <div class="section-line"></div>
      <span class="section-num">02</span>
    </div>
    <div class="trends-grid" id="trendsContent">

      <div class="trend-card">
        <div class="trend-tag">Macro Shift</div>
        <div class="trend-title">Agentic Commerce Moves From Concept to Infrastructure</div>
        <div class="trend-body">AI assistants are no longer just research tools — they're completing purchases. Shopify's Agentic Storefronts syndicate product catalogs directly into ChatGPT, Copilot, and Perplexity for native checkout. Salesforce's Agentforce Commerce launched a Guided Shopping Agent for B2C. 2025 was the proof-of-concept year; 2026 is where merchants must decide if and how they participate in these channels.</div>
        <div class="trend-stat">↗ AI traffic to retail sites up 4,700% YoY — Adobe Analytics</div>
        <div class="trend-footer">
          <span class="conf confirmed">Confirmed</span>
          <a href="https://www.shopify.com/editions/winter2026" target="_blank" class="source-chip">shopify.com/editions</a>
          <a href="https://www.digitalcommerce360.com/2025/12/23/ecommerce-trends-in-2026/" target="_blank" class="source-chip">digitalcommerce360.com</a>
        </div>
      </div>

      <div class="trend-card">
        <div class="trend-tag">Data Strategy</div>
        <div class="trend-title">Structured Product Data Is Now a Discovery Channel</div>
        <div class="trend-body">In an agentic ecosystem, AI systems surface products based on structured metadata — not page design or keyword density. Categories, attributes, metafields, and product descriptions must be clean, complete, and accurate. Merchants with poor catalog hygiene risk being excluded from AI-driven discovery entirely. This is the new version of "showing up on page one." Web traffic from AI sources on Amazon Prime Day 2025 was up 3,300% YoY.</div>
        <div class="trend-stat">↗ 43% of Gen Z begin product searches on TikTok or LLMs, not Google — Akeneo</div>
        <div class="trend-footer">
          <span class="conf reported">Reported</span>
          <a href="https://www.digitalcommerce360.com/2025/12/23/ecommerce-trends-in-2026/" target="_blank" class="source-chip">digitalcommerce360.com</a>
          <a href="https://craftberry.co/articles/global-e-commerce-statistics" target="_blank" class="source-chip">craftberry.co</a>
        </div>
      </div>

      <div class="trend-card">
        <div class="trend-tag">Consumer Behavior</div>
        <div class="trend-title">AI Personalization Drives Revenue — But Trust Is the Gate</div>
        <div class="trend-body">Consumers are warming to AI in shopping: 38% of U.S. consumers have used generative AI for online shopping, and AI chat is associated with ~4x higher conversion rates (12.3% vs 3.1% without AI). However, only 34% of U.S. customers are currently comfortable letting AI shop for them autonomously. The gap between AI capability and consumer trust remains the key friction point for agentic adoption.</div>
        <div class="trend-stat">↗ Companies using AI personalization earn 40% more revenue — SellersCommerce</div>
        <div class="trend-footer">
          <span class="conf reported">Reported</span>
          <a href="https://www.anchorgroup.tech/blog/ai-ecommerce-trends-statistics" target="_blank" class="source-chip">anchorgroup.tech</a>
          <a href="https://www.shopify.com/blog/ai-statistics" target="_blank" class="source-chip">shopify.com/blog</a>
        </div>
      </div>

      <div class="trend-card">
        <div class="trend-tag">Platform Trend</div>
        <div class="trend-title">Social & Live Commerce Accelerating as Primary Channels</div>
        <div class="trend-body">Social platforms are maturing into primary shopping destinations. U.S. social shoppers grew from 96M in 2023 to 104M in 2025. Livestream commerce delivers 10–30% conversion rates — far above traditional eCommerce's 2–3%. Meanwhile, global eCommerce sales are projected to surpass $3.8 trillion in 2026, with mobile commerce remaining the dominant and fastest-growing segment.</div>
        <div class="trend-stat">↗ US livestream ecommerce sales projected at $68B by 2026 — Statista</div>
        <div class="trend-footer">
          <span class="conf reported">Reported</span>
          <a href="https://www.bigcommerce.com/articles/ecommerce/ecommerce-trends/" target="_blank" class="source-chip">bigcommerce.com</a>
          <a href="https://blog.contactpigeon.com/top-retail-predictions-in-2026-how-ai-is-reshaping-commerce-and-customer-experience/" target="_blank" class="source-chip">contactpigeon.com</a>
        </div>
      </div>

    </div>
  </section>

  <!-- 03: PLATFORM UPDATES -->
  <section id="platformSection">
    <div class="section-header">
      <span class="section-title">Platform Updates</span>
      <div class="section-line"></div>
      <span class="section-num">03</span>
    </div>
    <div class="platform-grid" id="platformContent">

      <div class="platform-card shopify">
        <div class="platform-name">Shopify</div>
        <div class="platform-version">Winter '26 "RenAIssance" Edition · 150+ Features</div>
        <ul class="platform-highlights">
          <li><strong>Sidekick AI Overhaul</strong> — Now proactively manages workflows, builds custom apps, creates Flow automations, and generates performance reports via text. Sidekick Pulse surfaces insights before merchants ask. <span class="conf confirmed">Confirmed</span></li>
          <li><strong>Agentic Storefronts</strong> — Products discoverable and purchasable inside ChatGPT, Copilot, and Perplexity with native inventory, pricing, and checkout. Orders tracked with separate AI channel attribution. <span class="conf confirmed">Confirmed</span></li>
          <li><strong>SimGym + Rollouts</strong> — AI simulation app trained on billions of transactions predicts conversion impact before going live. Native A/B testing and scheduled theme rollouts now built-in — no third-party tools needed. <span class="conf confirmed">Confirmed</span></li>
          <li><strong>2,048 Product Variants</strong> — Up from 100. Major relief for complex catalogs, B2B, and configurable products. <span class="conf confirmed">Confirmed</span></li>
          <li><strong>Scripts → Functions Migration</strong> — Deadline extended to June 30, 2026. Begin migration of checkout logic now to avoid disruptions. <span class="conf confirmed">Confirmed</span></li>
          <li><strong>POS v11.0</strong> — Rebuilt selling flow with inline customer creation, faster cart-to-checkout transitions, and improved post-purchase screens. <span class="conf confirmed">Confirmed</span></li>
        </ul>
        <div class="platform-sources">
          <a href="https://www.shopify.com/editions/winter2026" target="_blank" class="source-chip">shopify.com/editions/winter2026</a>
          <a href="https://changelog.shopify.com" target="_blank" class="source-chip">changelog.shopify.com</a>
          <a href="https://www.shopify.com/blog/retail-release-roundup" target="_blank" class="source-chip">shopify.com/blog</a>
        </div>
      </div>

      <div class="platform-card woo">
        <div class="platform-name">WooCommerce</div>
        <div class="platform-version">v10.5.2 · Released February 16, 2026</div>
        <ul class="platform-highlights">
          <li><strong>Analytics Batch Processing</strong> — New scheduled imports batch-process analytics data every 12 hours (100 orders at a time), dramatically reducing server load. Manual triggers available. Store owners get clear import status visibility. <span class="conf confirmed">Confirmed</span></li>
          <li><strong>10.5.2 Regression Fix</strong> — Reverts 10.5.1 changes that caused add-to-cart buttons to be disabled for variable products in custom store configurations. Stores on 10.5 or 10.5.1 should update immediately. <span class="conf confirmed">Confirmed</span></li>
          <li><strong>PayPal Security Patch</strong> — Token-based validation added to PayPal Standard shipping callback, preventing unauthorized address/method updates. <span class="conf confirmed">Confirmed</span></li>
          <li><strong>Experimental REST API Cache</strong> — New caching layer for any WC REST API endpoint with improved performance for variable products. <span class="conf confirmed">Confirmed</span></li>
          <li><strong>Shipping Tax Flexibility</strong> — New <code>woocommerce_shipping_tax_class</code> filter enables dynamic tax calculations based on cart contents and customer location. <span class="conf confirmed">Confirmed</span></li>
          <li><strong>WP 6.9 + MCP Compatibility</strong> — 10.3.6 updated MCP adapter for better AI feature integration with WordPress 6.9+. <span class="conf confirmed">Confirmed</span></li>
        </ul>
        <div class="platform-sources">
          <a href="https://developer.woocommerce.com/2026/02/06/woocommerce-10-5-improving-analytics-and-admin-performance/" target="_blank" class="source-chip">developer.woocommerce.com (10.5)</a>
          <a href="https://developer.woocommerce.com/2026/02/18/woocommerce-10-5-2-dot-release/" target="_blank" class="source-chip">developer.woocommerce.com (10.5.2)</a>
        </div>
      </div>

      <div class="platform-card magento">
        <div class="platform-name">Adobe Commerce</div>
        <div class="platform-version">Magento · New 2026 Monthly Patch Cadence</div>
        <ul class="platform-highlights">
          <li><strong>New Monthly Security Patches</strong> — Starting January 2026, Adobe ships isolated monthly security fixes for all supported versions, replacing the old quarterly bundle cycle. Annual full feature patch lands in May. <span class="conf confirmed">Confirmed</span></li>
          <li><strong>Adobe Experience Platform Integration</strong> — Native real-time data sharing for orders, cart, and browse data coming in H1 2026. Real-time CDP audiences will sync back for personalized pricing and promotions. <span class="conf confirmed">Confirmed</span></li>
          <li><strong>App Builder DB (Beta)</strong> — Fully managed, high-performance document DB storage layer. Enables custom microservices without external AWS/Azure provisioning. GA targeted for H1 2026. <span class="conf confirmed">Confirmed</span></li>
          <li><strong>Campaign Orchestration Layer</strong> — Roadmap item: native ability to stage, schedule, preview, and launch promotions across multiple storefronts and geographies in one place. <span class="conf reported">Reported</span></li>
          <li><strong>EOL Deadlines</strong> — 2.4.4 extended support ends April 14, 2026. 2.4.5 extended support ends August 11, 2026. 2.4.6 regular support ends August 11, 2026. Upgrade planning should be underway. <span class="conf confirmed">Confirmed</span></li>
        </ul>
        <div class="platform-sources">
          <a href="https://experienceleague.adobe.com/en/docs/commerce-learn/tutorials/webinars-and-events/business-growth/vision-forward" target="_blank" class="source-chip">adobe.com/commerce roadmap</a>
          <a href="https://www.ayko.com/blog/big-changes-coming-to-adobe-commerce-the-2026-patch-cycle-shift" target="_blank" class="source-chip">ayko.com (patch cycle)</a>
          <a href="https://experienceleague.adobe.com/en/docs/commerce-operations/release/versions" target="_blank" class="source-chip">adobe.com/release versions</a>
        </div>
      </div>

    </div>
  </section>

  <!-- 04: BEST PRACTICES -->
  <section id="bpSection">
    <div class="section-header">
      <span class="section-title">Best Practices This Cycle</span>
      <div class="section-line"></div>
      <span class="section-num">04</span>
    </div>
    <div class="bp-grid" id="bpContent">
      <div class="bp-card">
        <div class="bp-num">01</div>
        <div class="bp-title">Audit Product Data for AI Readiness</div>
        <div class="bp-body">Review metafields, category structure, descriptions, and attributes across your catalog. Agentic storefronts surface products based on structured data — not SEO rank. Incomplete catalogs will be invisible to AI discovery channels.</div>
        <span class="conf inferred">Inferred</span>
      </div>
      <div class="bp-card">
        <div class="bp-num">02</div>
        <div class="bp-title">Begin Shopify Scripts → Functions Migration</div>
        <div class="bp-body">Deadline is June 30, 2026. Audit existing Scripts logic and map to Shopify Functions equivalents now. Last-minute migrations risk disrupting checkout and discount workflows during peak periods.</div>
        <span class="conf confirmed">Confirmed</span>
        <a href="https://changelog.shopify.com" target="_blank" class="source-chip" style="display:inline-block;margin-top:8px;">changelog.shopify.com</a>
      </div>
      <div class="bp-card">
        <div class="bp-num">03</div>
        <div class="bp-title">Update WooCommerce to 10.5.2 Immediately</div>
        <div class="bp-body">Stores on 10.5.0 or 10.5.1 face a known regression that can disable add-to-cart buttons for variable products. 10.5.2 (Feb 16) reverts the issue. Update all WooCommerce environments before this affects customers.</div>
        <span class="conf confirmed">Confirmed</span>
        <a href="https://developer.woocommerce.com/2026/02/18/woocommerce-10-5-2-dot-release/" target="_blank" class="source-chip" style="display:inline-block;margin-top:8px;">developer.woocommerce.com</a>
      </div>
      <div class="bp-card">
        <div class="bp-num">04</div>
        <div class="bp-title">Track AI Commerce as a New Attribution Channel</div>
        <div class="bp-body">Shopify now provides separate attribution for orders from AI chat platforms. Set up tracking now to establish a baseline — even if volumes are low, understanding this channel early provides a meaningful advantage as adoption accelerates.</div>
        <span class="conf confirmed">Confirmed</span>
      </div>
      <div class="bp-card">
        <div class="bp-num">05</div>
        <div class="bp-title">Plan Adobe Commerce Upgrades Before EOL</div>
        <div class="bp-body">2.4.4 extended support ends April 14, 2026. 2.4.5 and 2.4.6 end August 2026. Merchants on these versions should have upgrade timelines in progress now to avoid running unsupported code.</div>
        <span class="conf confirmed">Confirmed</span>
        <a href="https://experienceleague.adobe.com/en/docs/commerce-operations/release/versions" target="_blank" class="source-chip" style="display:inline-block;margin-top:8px;">adobe.com/release versions</a>
      </div>
      <div class="bp-card">
        <div class="bp-num">06</div>
        <div class="bp-title">Invest in Mobile & Social Checkout Experience</div>
        <div class="bp-body">Mobile dominates commerce traffic. Social commerce is approaching $80B in the U.S. Features like digital wallets, BNPL, and one-click checkout are table stakes. Review current checkout flow against platform capabilities this cycle.</div>
        <span class="conf reported">Reported</span>
        <a href="https://www.bigcommerce.com/articles/ecommerce/ecommerce-trends/" target="_blank" class="source-chip" style="display:inline-block;margin-top:8px;">bigcommerce.com</a>
      </div>
    </div>
  </section>

  <!-- 05: COMPETITIVE INTEL -->
  <section id="intelSection">
    <div class="section-header">
      <span class="section-title">Competitive Intelligence</span>
      <div class="section-line"></div>
      <span class="section-num">05</span>
    </div>
    <table class="intel-table" id="intelContent">
      <thead>
        <tr>
          <th>Platform</th>
          <th>Key Move</th>
          <th>Relevance to Us</th>
          <th>Signal</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Shopify <span class="badge new">New</span></td>
          <td>Agentic Storefronts — products purchasable inside ChatGPT, Copilot, Perplexity with native checkout and separate attribution tracking. <span class="conf confirmed">Confirmed</span></td>
          <td>Sets new customer expectations for off-site discovery. Evaluate when/how parts eCommerce catalogs can participate in AI channels.</td>
          <td><span class="badge new">Opportunity</span></td>
        </tr>
        <tr>
          <td>WooCommerce <span class="badge watch">Update</span></td>
          <td>Three releases in February (10.5, 10.5.1, 10.5.2) — analytics overhaul plus rapid regression fixes show active platform stewardship. <span class="conf confirmed">Confirmed</span></td>
          <td>WooCommerce merchants benefit from improved analytics reliability. 10.5.2 is a critical fix for variable product stores — update immediately.</td>
          <td><span class="badge watch">Action Req'd</span></td>
        </tr>
        <tr>
          <td>Adobe Commerce <span class="badge watch">Roadmap</span></td>
          <td>Monthly security patch cadence + AEP native integration in H1 2026 + App Builder DB targeting GA in H1 2026. <span class="conf confirmed">Confirmed</span></td>
          <td>Enterprise-tier personalization capability closing the gap with Salesforce. Monthly patches require updated maintenance planning for all Magento environments.</td>
          <td><span class="badge watch">Monitor</span></td>
        </tr>
        <tr>
          <td>Salesforce <span class="badge new">New</span></td>
          <td>Agentforce Commerce Guided Shopping Agent launched for B2C — proactive navigation, inventory checks, and conversational checkout. <span class="conf reported">Reported</span></td>
          <td>Signals conversational commerce agents are now a baseline expectation across major platforms — not a differentiator for long.</td>
          <td><span class="badge new">Watch</span></td>
        </tr>
        <tr>
          <td>OpenAI <span class="badge risk">Disruption</span></td>
          <td>Instant Checkout inside ChatGPT allows purchases from Shopify stores without leaving the conversation. Web traffic from AI on Prime Day 2025 up 3,300% YoY. <span class="conf confirmed">Confirmed</span></td>
          <td>The purchase funnel is moving off-property. Product data quality and structured catalog management is now a front for competitive advantage.</td>
          <td><span class="badge risk">High Impact</span></td>
        </tr>
      </tbody>
    </table>
  </section>

  <!-- SOURCES -->
  <section id="sourcesSection">
    <div class="section-header">
      <span class="section-title">Cited Sources</span>
      <div class="section-line"></div>
      <span class="section-num">06</span>
    </div>
    <div class="sources-section">
      <p style="font-size:12px;color:var(--muted);font-family:'DM Mono',monospace;margin-bottom:4px;">All claims in this report are tagged with a confidence level and linked to their primary source below.</p>
      <div class="sources-grid" id="sourcesContent">
        <div class="source-row"><span>01</span><div><a href="https://www.shopify.com/editions/winter2026" target="_blank">Shopify Winter '26 Editions — shopify.com/editions/winter2026</a></div></div>
        <div class="source-row"><span>02</span><div><a href="https://changelog.shopify.com" target="_blank">Shopify Changelog — changelog.shopify.com</a></div></div>
        <div class="source-row"><span>03</span><div><a href="https://www.shopify.com/blog/retail-release-roundup" target="_blank">Shopify Retail Release Roundup — shopify.com/blog</a></div></div>
        <div class="source-row"><span>04</span><div><a href="https://developer.woocommerce.com/2026/02/06/woocommerce-10-5-improving-analytics-and-admin-performance/" target="_blank">WooCommerce 10.5 Release Notes — developer.woocommerce.com</a></div></div>
        <div class="source-row"><span>05</span><div><a href="https://developer.woocommerce.com/2026/02/18/woocommerce-10-5-2-dot-release/" target="_blank">WooCommerce 10.5.2 Release Notes — developer.woocommerce.com</a></div></div>
        <div class="source-row"><span>06</span><div><a href="https://experienceleague.adobe.com/en/docs/commerce-learn/tutorials/webinars-and-events/business-growth/vision-forward" target="_blank">Adobe Commerce Vision Forward Roadmap — experienceleague.adobe.com</a></div></div>
        <div class="source-row"><span>07</span><div><a href="https://www.ayko.com/blog/big-changes-coming-to-adobe-commerce-the-2026-patch-cycle-shift" target="_blank">Adobe Commerce 2026 Patch Cycle — ayko.com</a></div></div>
        <div class="source-row"><span>08</span><div><a href="https://experienceleague.adobe.com/en/docs/commerce-operations/release/versions" target="_blank">Adobe Commerce Released Versions & EOL Dates — experienceleague.adobe.com</a></div></div>
        <div class="source-row"><span>09</span><div><a href="https://www.digitalcommerce360.com/2025/12/23/ecommerce-trends-in-2026/" target="_blank">10 eCommerce Trends Shaping 2026 — digitalcommerce360.com</a></div></div>
        <div class="source-row"><span>10</span><div><a href="https://www.anchorgroup.tech/blog/ai-ecommerce-trends-statistics" target="_blank">AI in E-Commerce: 16 Key 2026 Trends & Stats — anchorgroup.tech</a></div></div>
        <div class="source-row"><span>11</span><div><a href="https://www.shopify.com/blog/ai-statistics" target="_blank">AI Statistics for 2026: Top Ecommerce Trends — shopify.com/blog</a></div></div>
        <div class="source-row"><span>12</span><div><a href="https://www.bigcommerce.com/articles/ecommerce/ecommerce-trends/" target="_blank">Top Ecommerce Trends to Watch in 2026 — bigcommerce.com</a></div></div>
        <div class="source-row"><span>13</span><div><a href="https://blog.contactpigeon.com/top-retail-predictions-in-2026-how-ai-is-reshaping-commerce-and-customer-experience/" target="_blank">Top Retail Predictions 2026 — contactpigeon.com</a></div></div>
        <div class="source-row"><span>14</span><div><a href="https://craftberry.co/articles/global-e-commerce-statistics" target="_blank">Global Ecommerce Statistics 2025/2026 — craftberry.co</a></div></div>
      </div>
    </div>
  </section>

  <!-- FEEDBACK FAB -->
  <button class="feedback-fab" onclick="toggleFeedback()" id="feedbackFab">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
    </svg>
    Feedback
    <div class="feedback-unread-dot" id="unreadDot"></div>
  </button>

  <!-- FEEDBACK PANEL -->
  <div class="feedback-panel" id="feedbackPanel">
    <div class="feedback-panel-header">
      <div class="feedback-panel-title">Report Feedback</div>
      <button class="feedback-close" onclick="toggleFeedback()">×</button>
    </div>
    <div class="feedback-tabs">
      <button class="feedback-tab active" id="tabWrite" onclick="switchTab('write')">Leave Feedback</button>
      <button class="feedback-tab" id="tabLog" onclick="switchTab('log')">Past Notes</button>
    </div>

    <!-- WRITE TAB -->
    <div class="feedback-body" id="tabWriteContent">
      <div class="feedback-issue-label" id="currentIssueLabel">Issue 01 · February 23, 2026</div>
      <span class="feedback-label">Your notes for this issue</span>
      <textarea class="feedback-textarea" id="feedbackText" placeholder="What was missing? What was inaccurate? What should the prompt prioritize next time?"></textarea>
      <div class="feedback-actions">
        <button class="feedback-submit" id="feedbackSubmitBtn" onclick="submitFeedback()">Save Note</button>
      </div>
      <div class="feedback-success" id="feedbackSuccess">✓ Saved! Bring these notes to Claude to improve the prompt.</div>
    </div>

    <!-- LOG TAB -->
    <div class="feedback-body" id="tabLogContent" style="display:none;">
      <div class="feedback-log" id="feedbackLog"></div>
      <div class="feedback-empty" id="feedbackEmpty">No feedback saved yet.</div>
      <button class="feedback-copy-btn" id="copyAllBtn" onclick="copyAllFeedback()">Copy All Notes for Claude →</button>
    </div>
  </div>

  <!-- FOOTER -->
  <footer>
    <div class="footer-note">
      eCommerce Pulse is a biweekly intelligence briefing for eCommerce professionals, merchants, and platform teams.<br>
      Confidence levels: <span style="color:var(--confirmed)">Confirmed</span> = official source · <span style="color:var(--reported)">Reported</span> = trade press · <span style="color:var(--inferred)">Inferred</span> = pattern analysis
    </div>
    <div class="next-issue" id="nextIssue">Next Issue → March 9, 2026</div>
  </footer>

</div>

<script>
  async function refreshReport() {
    const btn = document.getElementById('refreshBtn');
    const overlay = document.getElementById('loadingOverlay');
    const status = document.getElementById('refreshStatus');
    const subtext = document.getElementById('loadingSubtext');

    btn.disabled = true;
    btn.classList.add('loading');
    overlay.classList.add('active');
    status.textContent = '';

    const steps = [
      'Searching for latest Shopify updates...',
      'Searching for WooCommerce releases...',
      'Searching for Adobe Commerce news...',
      'Searching for industry trend data...',
      'Compiling cited sources...',
      'Generating executive summary...',
      'Rendering updated report...'
    ];

    let stepIndex = 0;
    const stepInterval = setInterval(() => {
      if (stepIndex < steps.length) {
        subtext.textContent = steps[stepIndex];
        stepIndex++;
      }
    }, 2200);

    try {
      const today = new Date();
      const dateFormatted = today.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
      const timeFormatted = today.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });

      const prompt = `You are generating content for a biweekly eCommerce trends intelligence report called "eCommerce Pulse" for eCommerce professionals, merchants, and platform teams.

Today's date is ${dateFormatted}.

Search the web and generate a comprehensive report update. Return ONLY a valid JSON object with this exact structure (no markdown, no backticks, no preamble):

{
  "summaryStats": {
    "shopifyUpdates": "string (e.g. '150+')",
    "wooVersion": "string (e.g. '10.5.2')",
    "topTrend": "string (e.g. 'Agentic AI')"
  },
  "executiveSummary": [
    {"text": "paragraph 1 text", "confidence": "confirmed|reported|inferred"},
    {"text": "paragraph 2 text", "confidence": "confirmed|reported|inferred"},
    {"text": "paragraph 3 text", "confidence": "confirmed|reported|inferred"}
  ],
  "trends": [
    {
      "tag": "category label",
      "title": "trend title",
      "body": "trend description",
      "stat": "↗ key statistic with source",
      "confidence": "confirmed|reported|inferred",
      "sourceLabel": "source name",
      "sourceUrl": "https://..."
    }
  ],
  "platforms": {
    "shopify": {
      "version": "version/edition label",
      "highlights": [
        {"text": "feature description", "confidence": "confirmed|reported|inferred"}
      ],
      "sources": [{"label": "label", "url": "https://..."}]
    },
    "woocommerce": {
      "version": "version label",
      "highlights": [
        {"text": "feature description", "confidence": "confirmed|reported|inferred"}
      ],
      "sources": [{"label": "label", "url": "https://..."}]
    },
    "adobe": {
      "version": "version label",
      "highlights": [
        {"text": "feature description", "confidence": "confirmed|reported|inferred"}
      ],
      "sources": [{"label": "label", "url": "https://..."}]
    }
  },
  "bestPractices": [
    {
      "title": "practice title",
      "body": "practice description",
      "confidence": "confirmed|reported|inferred",
      "sourceLabel": "source name",
      "sourceUrl": "https://..."
    }
  ],
  "intel": [
    {
      "platform": "platform name",
      "badge": "new|watch|risk",
      "keyMove": "description",
      "confidence": "confirmed|reported|inferred",
      "relevance": "relevance to eCommerce merchants and platform teams",
      "signal": "Opportunity|Monitor|Watch|Action Req'd|High Impact"
    }
  ],
  "sources": [
    {"label": "Source Name — domain.com", "url": "https://..."}
  ]
}

Ensure every claim is grounded in real, current information. Use confidence levels accurately:
- confirmed = directly from official platform docs, changelogs, or press releases
- reported = from reputable trade press (Digital Commerce 360, eMarketer, Shopify blog, etc.)
- inferred = logical conclusion drawn from multiple signals

Include 4 trends, 5-6 highlights per platform, 6 best practices, 5 intel rows, and 10-14 cited sources.`;

      const GEMINI_API_KEY = 'YOUR_API_KEY_HERE';
      const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${GEMINI_API_KEY}`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          contents: [{ parts: [{ text: prompt }] }],
          generationConfig: { temperature: 0.7, maxOutputTokens: 8000 }
        })
      });

      const data = await response.json();
      if (data.error) throw new Error(data.error.message);
      const fullText = data.candidates?.[0]?.content?.parts?.[0]?.text || '';

      const jsonMatch = fullText.match(/\{[\s\S]*\}/);
      if (!jsonMatch) throw new Error('No JSON found in response');

      const report = JSON.parse(jsonMatch[0]);

      clearInterval(stepInterval);
      renderReport(report, dateFormatted, timeFormatted);

    } catch (err) {
      clearInterval(stepInterval);
      console.error('Refresh error:', err);
      status.textContent = '⚠ Refresh failed — showing cached content. Try again.';
    }

    overlay.classList.remove('active');
    btn.disabled = false;
    btn.classList.remove('loading');
  }

  // ── FEEDBACK WIDGET ──────────────────────────────────────
  const STORAGE_KEY = 'ecommerce-pulse-feedback';

  function getFeedback() {
    try {
      return JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
    } catch { return []; }
  }

  function saveFeedback(entries) {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(entries));
  }

  function toggleFeedback() {
    const panel = document.getElementById('feedbackPanel');
    const isOpen = panel.classList.contains('open');
    panel.classList.toggle('open');
    if (!isOpen) {
      document.getElementById('unreadDot').style.display = 'none';
      switchTab('write');
    }
  }

  function switchTab(tab) {
    document.getElementById('tabWriteContent').style.display = tab === 'write' ? 'block' : 'none';
    document.getElementById('tabLogContent').style.display = tab === 'log' ? 'block' : 'none';
    document.getElementById('tabWrite').classList.toggle('active', tab === 'write');
    document.getElementById('tabLog').classList.toggle('active', tab === 'log');
    if (tab === 'log') renderFeedbackLog();
  }

  function submitFeedback() {
    const text = document.getElementById('feedbackText').value.trim();
    if (!text) return;

    const issue = document.getElementById('issueBadge').textContent;
    const date = new Date().toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
    const time = new Date().toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });

    const entries = getFeedback();
    entries.unshift({ id: Date.now(), issue, date: `${date} ${time}`, text });
    saveFeedback(entries);

    document.getElementById('feedbackText').value = '';
    document.getElementById('feedbackSubmitBtn').disabled = true;
    const success = document.getElementById('feedbackSuccess');
    success.style.display = 'block';
    setTimeout(() => {
      success.style.display = 'none';
      document.getElementById('feedbackSubmitBtn').disabled = false;
    }, 3000);
  }

  function renderFeedbackLog() {
    const entries = getFeedback();
    const log = document.getElementById('feedbackLog');
    const empty = document.getElementById('feedbackEmpty');
    const copyBtn = document.getElementById('copyAllBtn');

    if (entries.length === 0) {
      log.innerHTML = '';
      empty.style.display = 'block';
      copyBtn.style.display = 'none';
      return;
    }

    empty.style.display = 'none';
    copyBtn.style.display = 'block';

    log.innerHTML = entries.map(e => `
      <div class="feedback-entry" id="entry-${e.id}">
        <div class="feedback-entry-meta">
          <span class="feedback-entry-issue">${e.issue}</span>
          <span class="feedback-entry-date">${e.date}</span>
        </div>
        <div class="feedback-entry-text">${e.text.replace(/\n/g, '<br>')}</div>
        <button class="feedback-entry-delete" onclick="deleteEntry(${e.id})">Delete note</button>
      </div>`).join('');
  }

  function deleteEntry(id) {
    const entries = getFeedback().filter(e => e.id !== id);
    saveFeedback(entries);
    renderFeedbackLog();
  }

  function copyAllFeedback() {
    const entries = getFeedback();
    if (!entries.length) return;
    const text = entries.map(e => `[${e.issue} — ${e.date}]\n${e.text}`).join('\n\n---\n\n');
    const full = `eCommerce Pulse — Accumulated Feedback for Prompt Improvement\n${'='.repeat(60)}\n\n${text}`;
    navigator.clipboard.writeText(full).then(() => {
      const btn = document.getElementById('copyAllBtn');
      btn.textContent = '✓ Copied to clipboard!';
      setTimeout(() => { btn.textContent = 'Copy All Notes for Claude →'; }, 2500);
    });
  }

  // Check for saved feedback on load and show unread dot if any exist
  window.addEventListener('load', () => {
    const entries = getFeedback();
    if (entries.length > 0) {
      document.getElementById('unreadDot').style.display = 'block';
    }
  });
  // ─────────────────────────────────────────────────────────

  function confBadge(level) {
    const labels = { confirmed: 'Confirmed', reported: 'Reported', inferred: 'Inferred' };
    return `<span class="conf ${level}">${labels[level] || level}</span>`;
  }

  function sourceChip(label, url) {
    return `<a href="${url}" target="_blank" class="source-chip">${label}</a>`;
  }

  function renderReport(r, dateFormatted, timeFormatted) {
    // Timestamp
    document.getElementById('lastRefreshed').textContent = `Last refreshed: ${dateFormatted} at ${timeFormatted}`;
    document.getElementById('dateStr').textContent = `${dateFormatted} · Biweekly`;

    // Stats
    if (r.summaryStats) {
      const bar = document.getElementById('summaryBar');
      bar.innerHTML = `
        <div class="summary-cell"><div class="summary-label">Platforms Tracked</div><div class="summary-value green">3</div></div>
        <div class="summary-cell"><div class="summary-label">Shopify Updates</div><div class="summary-value green">${r.summaryStats.shopifyUpdates}</div></div>
        <div class="summary-cell"><div class="summary-label">WooCommerce Ver.</div><div class="summary-value teal">${r.summaryStats.wooVersion}</div></div>
        <div class="summary-cell"><div class="summary-label">Top Trend</div><div class="summary-value pink">${r.summaryStats.topTrend}</div></div>
      `;
    }

    // Executive Summary
    if (r.executiveSummary) {
      document.getElementById('execContent').innerHTML = r.executiveSummary
        .map(p => `<p>${p.text} ${confBadge(p.confidence)}</p>`).join('');
    }

    // Trends
    if (r.trends) {
      document.getElementById('trendsContent').innerHTML = r.trends.map(t => `
        <div class="trend-card">
          <div class="trend-tag">${t.tag}</div>
          <div class="trend-title">${t.title}</div>
          <div class="trend-body">${t.body}</div>
          <div class="trend-stat">${t.stat}</div>
          <div class="trend-footer">
            ${confBadge(t.confidence)}
            ${t.sourceUrl ? sourceChip(t.sourceLabel, t.sourceUrl) : ''}
          </div>
        </div>`).join('');
    }

    // Platforms
    if (r.platforms) {
      const renderPlatform = (p, cls) => `
        <div class="platform-card ${cls}">
          <div class="platform-name">${cls === 'shopify' ? 'Shopify' : cls === 'woo' ? 'WooCommerce' : 'Adobe Commerce'}</div>
          <div class="platform-version">${p.version}</div>
          <ul class="platform-highlights">
            ${p.highlights.map(h => `<li>${h.text} ${confBadge(h.confidence)}</li>`).join('')}
          </ul>
          <div class="platform-sources">
            ${(p.sources || []).map(s => sourceChip(s.label, s.url)).join('')}
          </div>
        </div>`;
      document.getElementById('platformContent').innerHTML =
        renderPlatform(r.platforms.shopify, 'shopify') +
        renderPlatform(r.platforms.woocommerce, 'woo') +
        renderPlatform(r.platforms.adobe, 'magento');
    }

    // Best Practices
    if (r.bestPractices) {
      document.getElementById('bpContent').innerHTML = r.bestPractices.map((bp, i) => `
        <div class="bp-card">
          <div class="bp-num">0${i + 1}</div>
          <div class="bp-title">${bp.title}</div>
          <div class="bp-body">${bp.body}</div>
          ${confBadge(bp.confidence)}
          ${bp.sourceUrl ? sourceChip(bp.sourceLabel, bp.sourceUrl) : ''}
        </div>`).join('');
    }

    // Intel
    if (r.intel) {
      const signalClass = { 'Opportunity': 'new', 'Monitor': 'watch', 'Watch': 'watch', 'Action Req\'d': 'watch', 'High Impact': 'risk' };
      const rows = r.intel.map(row => `
        <tr>
          <td>${row.platform} <span class="badge ${row.badge}">${row.badge}</span></td>
          <td>${row.keyMove} ${confBadge(row.confidence)}</td>
          <td>${row.relevance}</td>
          <td><span class="badge ${signalClass[row.signal] || 'watch'}">${row.signal}</span></td>
        </tr>`).join('');
      document.getElementById('intelContent').querySelector('tbody').innerHTML = rows;
    }

    // Sources
    if (r.sources) {
      document.getElementById('sourcesContent').innerHTML = r.sources.map((s, i) => `
        <div class="source-row">
          <span>${String(i + 1).padStart(2, '0')}</span>
          <div><a href="${s.url}" target="_blank">${s.label}</a></div>
        </div>`).join('');
    }
  }
</script>

</body>
</html>
